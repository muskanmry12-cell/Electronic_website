<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Elec-Mart</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="style.css">
<style>
/* Product Grid */
.product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 16px;
}
.product-card {
  background: #fff;
  padding: 10px;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.15);
  transition: 0.3s;
}
.product-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}
.product-card img {
  width: 100%;
  height: 160px;
  object-fit: cover;
  border-radius: 6px;
}
.product-card button {
  margin-top: 5px;
  padding: 6px 10px;
  background: #0073e6;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}
.product-card button:hover {
  background: #005bb5;
}

/* Banner */
.banner {
  background: url('https://images-eu.ssl-images-amazon.com/images/G/31/img22/Wireless/devjyoti/GW/Uber/Nov/uber_new_high._CB537689643_.jpg') center/cover;
  height: 550px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: rgb(237, 243, 244);
  text-shadow: 0 0 10px rgba(0,0,0,0.7);
  font-family: sans-serif;
}
.banner h2 {
  font-size: 2.2rem;
  font-weight: bold;
}
.banner p {
  margin-top: 10px;
  font-size: 1.1rem;
}

/* Categories */
#categories {
  display: flex;
  gap: 10px;
  overflow-x: auto;
  padding-bottom: 10px;
}
#categories div {
  min-width: 120px;
  background: #2563eb;
  color: white;
  padding: 8px 12px;
  border-radius: 6px;
  text-align: center;
  cursor: pointer;
  white-space: nowrap;
  transition: 0.3s;
}
#categories div:hover {
  background: #1d4ed8;
}
</style>
</head>
<body class="bg-gray-100">

<!-- Header -->
<header class="bg-blue-700 text-white p-4 flex justify-between items-center shadow-md">
  <h1 class="text-2xl font-bold cursor-pointer" onclick="window.location.href='index.html'">Elec-Mart</h1>
  <div class="flex gap-4 items-center">
    <input type="text" id="searchInput" placeholder="Search products..." class="p-2 rounded text-black">
    <button id="searchBtn" class="bg-white text-blue-700 px-4 py-2 rounded hover:bg-gray-100">Search</button>
    <button id="authBtn" class="bg-green-500 px-4 py-2 rounded hover:bg-green-600">Sign In</button>
    <div class="cart cursor-pointer" onclick="window.location.href='cart.html'">ðŸ›’ <span id="cartCount">0</span></div>
  </div>
</header>

<!-- Banner -->
<section class="banner">
  <h2>Welcome to Elec-Mart</h2>
  <p>Your one-stop shop for Electronics!</p>
</section>

<!-- Categories -->
<section class="px-4 py-6">
  <h2 class="text-xl font-semibold mb-2">Categories</h2>
  <div id="categories"></div>
</section>

<!-- Products -->
<section class="px-4 py-6">
  <h2 class="text-xl font-semibold mb-2">Products</h2>
  <div id="productGrid" class="product-grid"></div>
</section>

<!-- Scripts -->
<script src="products.js"></script>
<script>
// ========== Category + Product Render ==========
const categoriesContainer = document.getElementById('categories');
const productGrid = document.getElementById('productGrid');

let allProducts = [];
Object.keys(productsData).forEach(cat => {
  allProducts = allProducts.concat(productsData[cat]);
  const catDiv = document.createElement('div');
  catDiv.innerText = cat;
  catDiv.addEventListener('click', () => showProductsByCategory(cat));
  categoriesContainer.appendChild(catDiv);
});

function renderProducts(products){
  productGrid.innerHTML = '';
  products.forEach(p=>{
    const card = document.createElement('div');
    card.className = 'product-card';
    card.innerHTML = `
      <img src="${p.images[0]}" alt="${p.name}">
      <h3 class="font-semibold mt-2">${p.name}</h3>
      <p class="text-green-600 font-bold">â‚¹${p.price}</p>
      <button onclick="addToCart('${p.id}')">Add to Cart</button>
      <button onclick="goToProduct('${p.id}','${getCategoryByProduct(p.id)}')">View Details</button>
    `;
    productGrid.appendChild(card);
  });
}
function getCategoryByProduct(productId){
  let catName = '';
  Object.keys(productsData).forEach(cat=>{
    if(productsData[cat].some(p=>p.id===productId)) catName = cat;
  });
  return catName;
}

// Show all products initially
renderProducts(allProducts);
function showProductsByCategory(category){
  renderProducts(productsData[category]);
}

// ========== Search ==========
document.getElementById('searchBtn').addEventListener('click',()=>{
  const term = document.getElementById('searchInput').value.toLowerCase();
  const filtered = allProducts.filter(p=>p.name.toLowerCase().includes(term));
  renderProducts(filtered);
});

// ========== Cart Functions ==========
function addToCart(productId){
  let prod = null;
  Object.keys(productsData).forEach(cat=>{
    productsData[cat].forEach(p=>{
      if(p.id===productId) prod = p;
    });
  });
  if(prod){
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    cart.push(prod);
    localStorage.setItem('cart', JSON.stringify(cart));
    alert(prod.name + ' added to cart');
    updateCartCount();
  }
}
function updateCartCount(){
  let cart = JSON.parse(localStorage.getItem('cart')) || [];
  document.querySelector('.cart span').innerText = cart.length;
}
updateCartCount();

// ========== Product Redirect ==========
function goToProduct(productId, category){
  window.location.href = `product.html?id=${productId}&category=${category}`;
}

// ========== Sign In / Sign Out ==========
const authBtn = document.getElementById('authBtn');
let loggedIn = localStorage.getItem("loggedIn") === "true";

function updateAuthButton(){
  if(loggedIn){
    authBtn.textContent = "Sign Out";
    authBtn.classList.remove("bg-green-500","hover:bg-green-600");
    authBtn.classList.add("bg-red-500","hover:bg-red-600");
  } else {
    authBtn.textContent = "Sign In";
    authBtn.classList.remove("bg-red-500","hover:bg-red-600");
    authBtn.classList.add("bg-green-500","hover:bg-green-600");
  }
}
updateAuthButton();

authBtn.addEventListener("click",()=>{
  if(loggedIn){
    localStorage.setItem("loggedIn","false");
    loggedIn = false;
    alert("You have signed out!");
  } else {
    window.location.href = "signin.html";
  }
  updateAuthButton();
});
</script>
</body>
</html> 

